### 索引常见数据结构
- 哈希表：键值对，哈希碰撞用链表链接，只适用于等值查询，不支持范围查询
- 有序数组：支持等值查询和范围查询，但是更新数据的情况下，有序数组成本较大，所以有序数组只适用于静态存储引擎
- 搜索树

### InnoDB索引模型
- 索引组织表：按主键顺序存放在索引上
- InnoDB 使用 B+ 树索引模型，数据都是存储在 B+ 树中的

### InnoDB索引类型
- 主键索引：叶子节点存的是整行数据。在 InnoDB 里，主键索引也被称为聚簇索引（clustered index）
- 非主键索引：叶子节点内容是主键的值。在 InnoDB 里，非主键索引也被称为二级索引（secondary index

### 主键索引和非主键索引查询区别
- 非主键索引查询到数据后，如果索引上的数据不满足查询需求，需要回到主键索引继续查询
- 主键索引查询，可以查到记录的所有信息
- 二次查询主键的过程称为`回表`

### 重建索引
- 主键索引
	`alter table T engine = InnoDB;` 
- 二级索引
	`alter table T drop index k;alter table T add index(k);`

### 覆盖索引
- 要查询的数据字段，全部通过二级索引可以查到
- 评估业务取舍是否有必要设置联合索引

### 最左前缀原则
- 最左前缀可以是联合索引的最左 N 个字段，也可以是字符串索引的最左 M 个字符
- 建立原则
	 - 通过移动位置，可以少建立一个单独索引
	 - 索引占用空间

### 索引下推 index condition pushdown 5.6之后版本
- 索引遍历过程中，对索引中包含的字段先做判断，直接过滤掉不满足条件的记录，减少回表次数

### 数据库优化器选择索引错误
- mysql统计信息不准确的情况下，可以analyze table 刷新统计信息
- force index 强制使用某个索引
- 优化sql语句，保持逻辑一致，人为引导mysql选择正确的索引（例如：修改排序字段）
- 新建一个更合适的索引
- 删掉错误使用的索引

### 字符串建立索引
- 考虑数据区分度
- 考虑数据长度
- 考虑前缀索引
- hash索引
- 倒序存储索引

### 索引失效
- 索引字段使用函数或参与计算
- 隐式类型转换，MySQL将字符串转为数字进行比较
- 隐式字符编码转换 utf8 -> utf8mb4 


