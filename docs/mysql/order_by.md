### sort-buffer
- sort-buffer-size: 用来排序的buffer大小
- 需要排序的内容小于sort-buffer-size，基于内存排序
- 需要排序的内容大于sort-buffer-size，用临时磁盘文件辅助排序

### max_length_for_sort_data
- 用来控制排序的行数据长度的一个参数
- 如果单行长度超过这个值，则只取排序字段和主键id，排序后，用主键id查询数据返回给客户端
- 如果排序单行长度不超过这个值，就采用全字段排序，然后直接返回排序数据给客户端，不需要再次查询主键

### rowid排序
- 排序sort-buffer里边只有排序字段和主键id
- 排完序后，如果要select其他字段，则需要用主键id回表查询其他字段
- 排序后，按照主键索引，查询数据查到一个就返回一个给客户端

### 使用覆盖索引可以单独完成的排序，不需要使用临时空间

### 内存临时表和磁盘临时表
- 排序的数据临时表小于tmp_table_size配置的值（默认是16M）时使用内存临时表，引擎是memory引擎，更倾向于内存临时表排序
- 大于配置的值时，使用磁盘临时表，使用的是InnoDB引擎，更倾向于全字段排序
### order_by_rand
- 排序字段加0-1随机生成数的字段
- sort-buffer 放置随机数和记录的`位置信息`
- 然后按照随机数字段排序，然后用前几个的位置信息去内存临时表上取出字段的值

### 主键 row id排序
- 有主键的InnoDB，rowid就是主键
- 无主键的InnoDB表，系统生成rowid
- memory临时表，数组排列，主键就是数组下标

### 优先队列排序算法
- 如果要排序的数据量总和大小不超过sort-buffer-size，可以考虑使用优先队列排序，否则使用归并排序，也就是临时文件排序
- 取前N个排序的元素构成堆（大根堆）
- 一次遍历后边的排序数据，不断调整堆
- 遍历完后返回堆的元素
