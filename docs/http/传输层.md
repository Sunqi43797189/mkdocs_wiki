### 传输层有两个协议
- TCP Transmission Control Protocol 传输控制协议
- UDP User Datagram Protocol 用户数据报协议
<img width="1167" alt="image" src="https://user-images.githubusercontent.com/39154923/137278301-c1a3560e-ac96-45b1-96e9-88a374efd267.png">

### UDP
- 无连接，减少了建立和释放链接的开销
- 尽最大能力交付，不保证可靠传输
- 首部较小，UDP首部只有8个字节
![image](https://user-images.githubusercontent.com/39154923/137895070-81ec320b-4196-4766-9438-2f8166e7712c.png)
- UDP长度：首部的长度 + 数据部分的长度
- UDP检验和：计算的是伪首部（12字节） + 首部（8字节）  + 数据
- 伪首部：仅在计算检验和时起作用，并不会传递给网络层  
![image](https://user-images.githubusercontent.com/39154923/137895425-44be7955-9425-4853-aefa-390eebe621e1.png)

- UDP：客户端源端口时临时开启的随机端口

### 伪首部
- 源IP 4字节
- 目标IP 4字节
- 零填充 + 协议 + 长度（首部 + 数据部分） 4字节
- TCP与UDP伪首部是一样的
- 仅在计算检验和时起作用
 
### TCP
![image](https://user-images.githubusercontent.com/39154923/138079676-0dfb6af5-a696-465e-9602-5be81e29e9a1.png)
- TCP首部的空间至少是20字节，最大60字节
- 和UDP一样 也有12个字节的伪首部，不会传递到网络层
- 数据偏移占4位，取值范围 0x0101~0x1111，乘4代表首部长度，最小值是5，最大值是15

### TCP要点
- 可靠传输
- 流量控制
- 拥塞控制
- 连接管理

### 数据长度
- UDP首付用16位记录整个UDP数据加首部的长度
- TCP用4位标记了TCP报文首部长度，并没有记录数据长度 
- 传输层的数据长度 = 网络层的数据长度 - 网络层的首部长度 - 传输层的首部长度

### TCP flag含义
- URG：Urgent，紧急字段，为1时，表示当前报文段中有紧急数据，需要优先传输，尽快传送
- ACK：Acknowledgment 确认字段，当ack为1时，首部中的确认号字段才效
- PSH：Push 交互式网络
- RST：Reset，为1时，表明链接中出现严重差错，必须释放连接，然后重新创建连接
- SYN：Synchronization，
  - SYN = 1，ACK = 0时，表明这是一个建立连接的请求
  - SYN = 1，ACK = 1时，表明对方同意建立连接
- FIN：Finish，为1时，表明数据已经发送完毕，要求释放连接

### 序号
- 4个字节
- 传输过程中，每一个字节都会有一个编号
- 建立连接后，序号代表：这一次传给对方的TCP数据部分的第一个字节的编号

### 确认号
- 4个字节
-  建立连接后，确认号代表：期望对方下一次传过来的TCP数据部分的第一个字节的编号